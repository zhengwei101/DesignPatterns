# 单例模式

如果一个类只允许创建一个对象(或实例)，那么，这个类就是一个单例类，这种设计模式就是单例模式。

## 定义

保证一个类仅有一个实例，并提供一个该实例的全局访问点。

## 要点

- Singleton模式中的实例构造器可以设置为 protected 以允许子类派生
- Singleton模式一般不要支持拷贝构造函数和赋值拷贝接口，因为这有可以导致多个对象实例，与Singleton模式的初衷违背。
- 如何实现多线程环境下安全的Singleton？ 注意对双检查锁的正确实现。



## 在下列情况下使用单例

你需要在系统中拥有一个且只有一个类型的对象

## 如果出现以下情况，请勿使用单例

- 想节省内存
- 因为其他人都在这么做(货物崇拜编程)
- 在用户界面组件中
- 它应该是一个缓存
- 在字符串中
- 在会话中

## 如何创建最佳单例

- 越小越好
- 确保它是线程安全的
- 确保它永远不为空
- 确保只创建一次
- 懒惰初始化还是系统初始化？取决于您的需求
- 有时操作系统或 JVM 会为您创建单例（例如，在 Java 中，每个类的定义都是单例）
- 提供一个析构函数，或想办法怎样来处理资源
- 使用少量内存
